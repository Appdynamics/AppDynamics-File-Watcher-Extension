file watcher extension
==============================
An AppDynamics extension to be used with a stand alone Java machine agent to provide metrics from file modification.

## Metrics Provided ##

We provide following metric related to modification of a file.

- IsModified : 1 if file is modified in last minute and 0 if not.
- Size : A positive integer indicating the current size of the file.
- FileCount: Count of files in a directory.

We have added following options as well-

# If false then all the files under the directory will be ignored and only the directory level metrics will be published
# for the directories specified above.
# For files given above it will have no effect
isDirectoryDetailsRequired: false

# If true then an extra metric will be shown that will give age of the oldest file (in seconds when the file was last
# modified and compared to current time) in the directory specified above.
# For files given above it will not display this metric
isOldestFileAgeMetricRequired: true

# If true then an extra metric will be shown that will give number of files in the directories specified above.
# For files given above it will not display this metric
isFileCountRequired: true

# If true then all the hidden files will be ignored monitoring.
ignoreHiddenFiles: true


## Installation ##

1. Download and unzip FileWatcher.zip from AppSphere.
2. Copy the FileWatcher directory to `<MACHINE_AGENT_HOME>/monitors`.


## Configuration ##

###Note
Please make sure to not use tab (\t) while editing yaml files. You may want to validate the yaml file using a yaml validator http://yamllint.com/

1. Configure the file to be watched by editing the config.yaml file in `<MACHINE_AGENT_HOME>/monitors/FileWatcher/`. Below is the format

Important - displayName has to be unique for the file/folder

# List of files
fileToProcesses:
  - displayName: "file1"
    path: "/Users/xyz/Documents/testFolder/file1.txt"

  - displayName: "folder1"
    path: "/Users/xyz/Documents/testFolder/"

#For the shared directory on windows the path should be like
# path: "\\\\1.2.3.4\\abc\\def\\ProductI
    
# If true then an extra metric will be shown that will give number of files in the directories specified above.
# For files given above it will show zero
isFileCountRequired: true

metricPrefix: "Custom Metrics|FileWatcher|"


2. Configure the path to the config.yaml file by editing the <task-arguments> in the monitor.xml file. Below is the sample

     <task-arguments>
         <!-- config file-->
             <argument name="config-file" is-required="true" default-value="monitors/FileWatcher/config.yml" />
          ....
     </task-arguments>

## Contributing ##

Always feel free to fork and contribute any changes directly via [GitHub][].

## Community ##

Find out more in the [Community][].

## Support ##

For any questions or feature request, please contact [AppDynamics Center of Excellence][].

**Version:** 1.1
**Controller Compatibility:** 3.7 or later

[GitHub]: https://github.com/Appdynamics/FileWatcher-extension
[Community]: http://community.appdynamics.com/
[AppDynamics Center of Excellence]: mailto:ace-request@appdynamics.com
